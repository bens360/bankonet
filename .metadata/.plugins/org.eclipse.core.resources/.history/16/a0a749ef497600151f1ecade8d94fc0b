package DTO;

import java.util.Scanner;

import com.bankonet.Client;
import com.bankonet.Compte;
import DAO.ClientDao;
import Metier.ActionCompte;
import Presentation.IHM;

public class Dto {

	/**
	 * Méthode gérant le choix de l'utilisateur par rapport au menu
	 * 
	 * @param
	 */
	public static void GestionChoix (String choixClient) {
		switch (choixClient) {
		case "0":
		System.out.println("Arrêt de l’application");
		//fin de l'application	
			break;
		case "1":
			System.out.println("Cas solde des comptes");
			ClientDao.SoldeDesComptes();
		gestionIHM();
			break;
		case "2":
		Compte compte = ClientDao.SelectioneCompte();
		ActionCompte.EffectueDepot(compte);
		gestionIHM();
			break;
		case "3":
		compte = ClientDao.SelectioneCompte();
		ActionCompte.EffectueRetrait(compte);
		gestionIHM();
			break;
		case "4":
		Compte compteDebit = ClientDao.SelectioneCompte();
		Compte compteCredit = ClientDao.SelectioneCompte();
		ActionCompte.EffectueVirementEntreCompte();
		gestionIHM();
			break;
		case "5":
		ActionCompte.EffectueVirementExterne();
		gestionIHM();
		default: 
			System.out.println("Veuillez entrer une information correcte!");
			RecupereChoixUtilisateur();
			break;
		}
	}

	public static void gestionIHM(){
		Client clientEnCours= GestionMenuLogIn();
		String choixUtilisateur = RecupereChoixUtilisateur();
		GestionChoix(choixUtilisateur);
	}

	/**
	 * Méthode récupérant le choix de l'utilisateur par rapport au menu affiché
	 * @return String: choixUtilisateur: le choix de l'utilisateur
	 */
	public static String RecupereChoixUtilisateur(){
		String choixUtilisateur=new String();
		try {
		Scanner sc = new Scanner(System.in);
		Presentation.IHM.AfficheMenu();
		choixUtilisateur = sc.nextLine();
		} catch (Exception e) {
			System.out.println("Erreur dans RecupereChoixUtilisateur");
		}
		return choixUtilisateur;
	}

	/**
	 * Méthode gérant l'écran Login/MDP
	 * renvoi le client correspond au couple Login/MDP
	 * @return Client
	 */
	public static Client GestionMenuLogIn() {
		Scanner sc = new Scanner(System.in);
		boolean mdpOKKO =false;
		String loginClient="";
		String mdpClient="";
		
		while (mdpOKKO  == false || loginClient.equals("") || mdpClient.equals(""))  {
		Presentation.IHM.AfficheMenuLogin();
		System.out.println("Veuillez saisir votre login");
		loginClient = sc.nextLine();
		System.out.println("Veuillez saisir votre mot de passe");
		mdpClient = sc.nextLine();
		mdpOKKO = ClientDao.testLoginMdp(loginClient, mdpClient);
		
		System.out.println("Valeur de mdpOKKO= " + mdpOKKO + " Valeur de loginCLient= " + loginClient + " Valeur de MDP= " + mdpClient);
		}
		Client client = ClientDao.recupereClient(loginClient, mdpClient);
		gestionIHM();
		return client;
	}

}
